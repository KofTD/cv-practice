# Практическая работа №1. Обработка изображений с использованием библиотеки OpenCV ##

В реализациях предполагается, что `img`, `frame`, `texture` — это `numpy.ndarray` формы `(H, W, 3)` в порядке каналов **BGR**. Значения пикселей — целые в диапазоне `[0,255]` (тип `uint8`), вычисления внутри функций часто выполняются в `float32` с последующей нормализацией/приведением к `uint8`.

## 1) `resize_image(img, scale=None, new_h=None, new_w=None)`

Предназначен для изменения размера изображения. В реализации используется метод ближайших соседей 

**Параметры:**
- `img` — входное изображение (`numpy.ndarray`, `h x w x 3`).
- `scale` — коэффициент масштабирования. Альтернативно можно указать `new_h` и `new_w`.
- `new_h`, `new_w` — новые высота и ширина (целые).

Принцип работы:

- Создаётся пустое изображение нового размера:
- Если режим работы `scale`, то размер `(int(h*scale), int(w*scale))`, где h, w - размеры исходного изображения `img`, `int()` - функция приведения к целому типу 
- Если заданы только размеры нового изображения, то размер `(new_h, new_w)`
- Для каждого пикселя нового изображения вычисляются координаты соответствующего пикселя исходного изображения через деление на коэффициент масштабирования.
- Значение цвета исходного пикселя присваивается новому.


 ## 2) `sepia(img, k)`

Предназначен для наложения сепии.    

**Параметры:**

`img` - передаваемое изображение

`k` - насыщенность сепии

Принцип работы:
- Для каждого пикселя изменяются каналы цветов `R, G, B` (красный, зеленый, синий соответственно) по формулам:
  - `R = R + 2*k`
  - `G = G + 0.5*k`
  - `B = B - k`
- Используется `np.clip()`, чтобы значения не выходили за пределы [0,255].
- Результат собирается обратно в трёхканальное изображение и приводится к `uint8`.  

## 3) `vinetka(img,k,radius,center)`

Предназначен для затемнения краёв изображения.

**Параметры:**

`img` - передаваемое изображение

`k` - интенсивность виньетки

`raduis` - радиус окружности, вне которой начинается виньетирование

`center` - центр виньентирования

Принцип работы:
- Для каждого пикселя изображения рассчитывается его евклидово расстояние до центра виньетки, формируя массив расстояний distances.
- Рассчитанные расстояния нормируются, чтобы их значения находились в диапазоне [0, 1], получается массив `norm_distanses`.
- Для пикселей, расстояние до центра которых превышает заданный радиус (принадлежащий отрезку [0, 1]), вычисляется коэффициент затухания по формуле: `coeffs[mask] = 1-k*(norm_distanses[mask]-radius)/(1-radius)`, где `coeffs` - массив коэффициентов для пикселей изображения
    - Здесь `norm_distances[mask] - radius` определяет начало затемнения от заданного радиуса (светлая центральная область).
    - Деление на `1 - radius` обеспечивает плавное усиление затемнения к краям изображения.
    - Параметр k регулирует интенсивность затемнения.
- Каждый пиксель изображения умножается на соответствующий коэффициент затухания, что приводит к затемнению краев с сохранением яркости в центре.


## 4) `pixelize(img, oblast, k)`

Предназначен для пикселизации области.

**Параметры:**

`img` - передаваемое изображение

`oblast` - область пикселизации

`k` - степень пикселизации 

Принцип работы:
- Область изменяется на несколько пикселей, чтобы стать кратной значению `k`.
- Изображение сжимается в `k` раз и затем увеличивается во столько же, с помощью описанной выше функции `resize_image()`, тем самым заменяя пиксели в ячейках размера `k x k` одним значением из ячейки.
    

## 5) `rect_frame(img, thickness, color)`

Предназначен для создания прямоугольной рамки вокруг изображения.

**Параметры:**

`img` - передаваемое изображение

`thickness` - ширина рамки

`color` - цвет рамки

Принцип работы:
- Создаётся новое изображение увеличенного размера с фоновым цветом.
- Исходное изображение вставляется внутрь.  



## 6) `frame(img, frame, thickness)`

Предназначен для создания рамки произвольной формы.

**Параметры:**

`img` - передаваемое изображение

`frame` - изображение с рамки на черном фоне

`thickness` - ширина рамки

Принцип работы:
- Из шаблона рамки вырезаются углы и 4 стороны.
- Стороны масштабируются под размер изображения и накладываются на исходное изображение



## 7) `bliki(img,texture,k)`

Предназначен для наложения эффекта блика объектива.  

**Параметры:**

`img` - передаваемое изображение

`texture` - изображение с текстурой блика

`k` - интенсивность блика
  
Принцип работы:
- Текстура бликов масштабируется под размер изображения
- Текстура складывается с изображением. Возможно изменение интенсивности блика с помощью параметра `k`


## 8) `watercolor(img, texture,k)`
Предназначен для наложения эффекта акварельной бумаги.    

**Параметры:**

`img` - передаваемое изображение

`texture` - изображение с акварельной текстурой

`k` - интенсивность смешивания

Принцип работы:

- Текстура бумаги масштабируется под размер изображения и нормализуется в диапазон [0, 1].
- Из текстуры вычитается её среднее значение, чтобы она колебалась вокруг нуля (чёрные участки дают отрицательное смещение, белые — положительное).
- Полученная центрированная текстура прибавляется к изображению с весом `k`.


